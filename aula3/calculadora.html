<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>calculadora</title>

    <style>
        body {
            text-align: center;
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            margin-top: 50px;
        }
        h1 {
            color: #333;
        }
        #display {
            width: 200px;
            height: 40px;
            font-size: 24px;
            text-align: right;
            margin-bottom: 10px;
        }
        button {
            width: 45px;
            height: 45px;
            font-size: 18px;
            margin: 2px;
        }#limpar{
            width: 70px
           
        }
    </style>

</head>
<body>
<h1>CALCULADORA</h1>
<input type="text" id="display" readonly><br><br>
<button id="limpar" class="">Limpar</button> <button>C</button><br><br>
<button>7</button> <button>8</button> <button>9</button> <button>/</button><br><br>
<button>4</button> <button>5</button> <button>6</button> <button>*</button><br><br>
<button>1</button> <button>2</button> <button>3</button> <button>-</button><br><br>
<button>0</button> <button>.</button> <button>=</button> <button>+</button><br><br> 
<script>
   
const botoes = document.querySelectorAll("button")
const display = document.getElementById("display")

botoes.forEach(botao => {
  botao.addEventListener("click", () => {
    const value = botao.textContent

    if (value === '=') {
      try {
        display.value = calcularExpressao(display.value)
      } catch {
        display.value = 'Erro'
      }
    } else if (value === 'C') {
      display.value = display.value.slice(0, -1)
    } else if (value === 'Limpar') {
      display.value = ''
    } else {
      display.value += value
    }
  })
})

function calcularExpressao(expr) {
  expr = expr.replace(/\s+/g, '')

  const tokens = expr.split(/([+\-*/])/).filter(Boolean)
  const numeros = []
  const operadores = []

  tokens.forEach(token => {
    if (!isNaN(token)) {
      numeros.push(parseFloat(token))
    } else if (['+', '-', '*', '/'].includes(token)) {
      operadores.push(token)
    } else {
      throw new Error('Operador inv√°lido')
    }
  })

  // Primeiro * e /
  for (let i = 0; i < operadores.length; i++) {
    if (operadores[i] === '*' || operadores[i] === '/') {
      const a = numeros[i]
      const b = numeros[i + 1]
      const resultado = operadores[i] === '*' ? a * b : a / b
      numeros.splice(i, 2, resultado)
      operadores.splice(i, 1)
      i--
    }
  }

  // Depois + e -
  for (let i = 0; i < operadores.length; i++) {
    const a = numeros[i]
    const b = numeros[i + 1]
    const resultado = operadores[i] === '+' ? a + b : a - b
    numeros.splice(i, 2, resultado)
    operadores.splice(i, 1)
    i--
  }

  return numeros[0]
}
</script>
    
</body>
</html>